{"version":3,"sources":["../src/plugin.js"],"names":["client","driver","connection","app","onClose","plugin","id","schema","name","middleware","useNullAsDefault"],"mappings":";;;;;;AAAA;;AACA;;;;AACA;;;;AACA;;;;;;;;kBAEe,YAA2C;AAAA,iFAAP,EAAO;;AAAA,MAAjCA,MAAiC,QAAxCC,MAAwC;AAAA,MAAtBC,UAAsB;;AACxD,SAAO,CAACC,GAAD,YAAsB;AAAA,QAAdC,OAAc,SAAdA,OAAc;;AAC3B,UAAMC,SAAS,EAAEC,IAAI,qBAAN,EAAeC,QAASC,IAAD,IAAU,CAAE,CAAnC,EAAf;AACA,UAAMC,aAAa,oBAAK;AACtBT,YADsB;AAEtBE,gBAFsB;AAGtBQ,wBAAkB;AAHI,KAAL,CAAnB;;AAMA,2BAAQP,GAAR,EAAaE,MAAb,EAAqB,EAAEI,UAAF,EAAcL,OAAd,EAArB;AACA,2BAAQD,GAAR,EAAaE,MAAb,EAAqB,EAAEI,UAAF,EAAcL,OAAd,EAArB;AACD,GAVD;AAWD,C","file":"plugin.js","sourcesContent":["import { genid } from '@micro/microjs';\nimport knex from 'knex';\nimport methods from './methods';\nimport modules from './modules';\n\nexport default ({ driver:client, ...connection } = {}) => {\n  return (app, { onClose }) => {\n    const plugin = { id: genid(), schema: (name) => {} };\n    const middleware = knex({\n      client,\n      connection,\n      useNullAsDefault: true\n    });\n\n    methods(app, plugin, { middleware, onClose });\n    modules(app, plugin, { middleware, onClose });\n  };\n};"]}