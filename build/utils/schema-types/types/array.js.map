{"version":3,"sources":["../../../../src/utils/schema-types/types/array.js"],"names":["value","convertIn","convertOut","schema","schemaValidate","options","Object","create","string","Array","isArray","filter","id","join","split"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;kBAEe;AACbA,SAAQ,OADK;AAEbC,WAFa;AAGbC,YAHa;AAIbC,UAAQ,sBAAQC,cAAR;AAJK,C;;;AAOf,SAASA,cAAT,GAAuD;AAAA,MAA/BC,OAA+B,uEAArBC,OAAOC,MAAP,CAAc,IAAd,CAAqB;;AACrD,MAAIJ,SAAS,cAAIK,MAAJ,EAAb;;AAEA,SAAO,+BAAgBH,OAAhB,EAAyBF,MAAzB,EAAiC,6CAAjC,CAAP;AAID;;AAED,SAASF,SAAT,CAAmBD,KAAnB,EAA0B;AACxB,MAAIS,MAAMC,OAAN,CAAcV,KAAd,CAAJ,EAA0B;AACxB,WAAOA,MAAMW,MAAN,CAAaC,MAAM,sBAASA,EAAT,CAAnB,EAAiCC,IAAjC,CAAsC,GAAtC,CAAP;AACD;;AAED,SAAOb,KAAP;AACD;;AAED,SAASE,UAAT,CAAoBF,KAApB,EAA2B;AACzB,MAAI,sBAASA,KAAT,CAAJ,EAAqB;AACnB,WAAOA,MAAMc,KAAN,CAAY,GAAZ,CAAP;AACD;;AAED,SAAOd,KAAP;AACD","file":"array.js","sourcesContent":["import Joi from 'joi';\nimport memoize from 'lodash.memoize';\nimport isString from 'lodash.isstring';\nimport applyValidators from '../utils/apply-validators';\nimport setDefault from '../utils/validators/set-default';\nimport setRequired from '../utils/validators/set-required';\nimport isNumber from 'lodash.isnumber';\n\nexport default {\n  value : 'array',\n  convertIn,\n  convertOut,\n  schema: memoize(schemaValidate)\n};\n\nfunction schemaValidate(options = Object.create(null)) {\n  let schema = Joi.string();\n\n  return applyValidators(options, schema, [\n    setDefault,\n    setRequired\n  ]);\n}\n\nfunction convertIn(value) {\n  if (Array.isArray(value)) {\n    return value.filter(id => isNumber(id)).join(',');\n  }\n\n  return value;\n}\n\nfunction convertOut(value) {\n  if (isString(value)) {\n    return value.split(',');\n  }\n\n  return value;\n}"]}