{"version":3,"sources":["../../src/utils/convert-to-response.js"],"names":["convertToResponse","schema","fields","convertOuts","properties","result","name","callback","key","value"],"mappings":";;;;;kBAGwBA,iB;;AAHxB;;;;AACA;;;;;;AAEe,SAASA,iBAAT,CAA2BC,MAA3B,EAAmCC,MAAnC,EAA2C;AACxD,QAAMC,cAAc,+BAAgBF,OAAOG,UAAvB,CAApB;;AAEA,SAAOC,UAAU;AACf,QAAI,sBAAcA,MAAd,CAAJ,EAA2B;AACzB,uBAA+BF,WAA/B,EAA4C;AAAA,YAAjCG,IAAiC,QAAjCA,IAAiC;AAAA,YAA3BC,QAA2B,QAA3BA,QAA2B;;AAC1CF,eAAQC,IAAR,IAAiBC,SAASF,OAAQC,IAAR,CAAT,EAAyBL,OAAOG,UAAP,CAAmBE,IAAnB,CAAzB,CAAjB;AACD;;AAED,aAAOD,MAAP;AACD,KAND,MAMO;AACL,UAAIG,MAAMN,OAAQ,CAAR,CAAV;AACA,UAAIO,QAAQJ,OAAQ,CAAR,KAAeA,MAA3B;;AAEA,wBAA+BF,WAA/B,EAA4C;AAAA,YAAjCG,IAAiC,SAAjCA,IAAiC;AAAA,YAA3BC,QAA2B,SAA3BA,QAA2B;;AAC1C,YAAIC,QAAQF,IAAZ,EAAkB;AAChBG,kBAAQF,SAASE,KAAT,EAAgBR,OAAOG,UAAP,CAAmBE,IAAnB,CAAhB,CAAR;AACA;AACD;AACF;;AAED,aAAO,EAAE,CAAEE,GAAF,GAASC,KAAX,EAAP;AACD;AACF,GApBD;AAqBD","file":"convert-to-response.js","sourcesContent":["import isPlainObject from 'lodash.isplainobject';\nimport checkConvertOut from './check-convert-out';\n\nexport default function convertToResponse(schema, fields) {\n  const convertOuts = checkConvertOut(schema.properties);\n\n  return result => {\n    if (isPlainObject(result)) {\n      for (let { name, callback } of convertOuts) {\n        result[ name ] = callback(result[ name ], schema.properties[ name ]);\n      }\n\n      return result;\n    } else {\n      let key = fields[ 0 ];\n      let value = result[ 0 ] || result;\n\n      for (let { name, callback } of convertOuts) {\n        if (key === name) {\n          value = callback(value, schema.properties[ name ]);\n          break;\n        }\n      }\n\n      return { [ key ]: value };\n    }\n  };\n}"]}