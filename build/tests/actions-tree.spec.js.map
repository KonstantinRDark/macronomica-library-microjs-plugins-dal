{"version":3,"sources":["../../src/tests/actions-tree.spec.js"],"names":["should","micro","level","plugins","tableName","schema","parentId","type","number","null","leaf","boolean","default","name","string","max","trim","before","run","then","act","createTable","after","dropTable","end","describe","it","result","equal","root","child","createNode","all","exist","be","a","have","property","id","findOne","removeNode","roots","updateNode","root1","root2","not","child1","child2","findPath","rootPath","child1Path","child2Path","with","length","findByParentId","list1","list2","list3","list4","connection","createTableIfNotExists","table","increments","integer","nullable","defaultTo","properties","dropTableIfExists","criteria","params","fields","options","findFull"],"mappings":"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","file":"actions-tree.spec.js","sourcesContent":["import chai from 'chai';\nimport Micro, { LEVEL_ERROR } from '@microjs/microjs';\nimport { CONNECT_OPTIONS } from './constants';\nimport Plugin, {\n  Schema,\n  SchemaTypes,\n  PIN_CONNECTION,\n  PIN_LIST_FIND_ONE,\n  PIN_TREE_FIND_PARENT_id,\n  PIN_TREE_CREATE,\n  PIN_TREE_UPDATE,\n  PIN_TREE_FIND_PATH,\n  PIN_TREE_REMOVE\n} from '../index';\n\nconst should = chai.should();\nconst micro = Micro({\n  level  : LEVEL_ERROR,\n  plugins: [ Plugin(CONNECT_OPTIONS) ]\n});\nconst tableName = 'module-tree-db';\n\nconst schema = new Schema('TreeNode', {\n  parentId: {\n    type: SchemaTypes.number,\n    null: true\n  },\n  leaf: {\n    type   : SchemaTypes.boolean,\n    default: true\n  },\n  name: {\n    type: SchemaTypes.string,\n    max : 128,\n    trim: true\n  },\n}, { tableName });\n\nbefore(() => micro\n  .run()\n  .then(() => micro.act(PIN_CONNECTION))\n  .then(createTable)\n);\nafter(() => micro.act(PIN_CONNECTION)\n  .then(dropTable)\n  .then(() => micro.end()));\n\ndescribe('actions-tree', function() {\n\n  it('ping', () => micro\n    .act('cmd:ping')\n    .then(result => should.equal(result, 'pong'))\n  );\n\n  it('create', () => {\n    let root;\n    let child;\n\n    return createNode({ name: 'node-root' })\n      .then(result => Promise.all([\n        root = result,\n        should.exist(result),\n        result.should.be.a('object'),\n        result.should.have.property('id'),\n        result.id.should.be.a('number')\n      ]))\n      .then(() => findOne(root.id))\n      .then(result => Promise.all([\n        should.exist(result),\n        result.should.have.property('leaf').be.a('boolean').equal(true)\n      ]))\n\n      .then(() => createNode({ parentId: root.id, name: 'node-child-1' }))\n      .then(result => Promise.all([\n        child = result,\n        should.exist(result),\n        result.should.be.a('object'),\n        result.should.have.property('id'),\n        result.id.should.be.a('number')\n      ]).then(() => result))\n\n      .then(result => Promise.all([ findOne(root.id), findOne(result.id) ]))\n      .then(([ root, child ]) => Promise\n        .all([\n          should.exist(root),\n          should.exist(child),\n          root.should.have.property('leaf').be.a('boolean').equal(false),\n          child.should.have.property('leaf').be.a('boolean').equal(true)\n      ]))\n      .then(() => Promise.all([ removeNode(root.id), removeNode(child.id) ]));\n  });\n\n  it('update', () => {\n    let roots;\n    let child;\n\n    return Promise\n      .all([\n        createNode({ name: 'node-root-1' }),\n        createNode({ name: 'node-root-2' }),\n      ])\n      .then(result => roots = result)\n      .then(roots => createNode({ parentId: roots[ 0 ].id, name: 'node-child-1' })\n        .then(child => updateNode(child.id, { parentId: roots[ 1 ].id })\n          .then(() => Promise\n            .all([\n              findOne(roots[ 0 ].id),\n              findOne(roots[ 1 ].id),\n              findOne(child.id)\n            ])\n            .then(([ root1, root2, child ]) => Promise.all([\n              should.exist(root1),\n              should.exist(root2),\n              should.exist(child),\n              root1.should.have.property('leaf').equal(true),\n              root2.should.have.property('leaf').equal(false),\n              child.should.have.property('leaf').equal(true),\n              child.should.have.property('parentId').not.equal(root1.id),\n              child.should.have.property('parentId').equal(root2.id),\n            ]))\n          )\n          .then(result => Promise.all([\n            removeNode(roots[ 0 ].id),\n            removeNode(roots[ 1 ].id),\n            removeNode(child.id)\n          ]))\n        )\n      );\n  });\n\n  it('find path', () => createNode({ name: 'node-root-1' })\n    .then(root => createNode({ parentId: root.id, name: 'node-child-1' })\n      .then(child1 => createNode({ parentId: child1.id, name: 'node-child-2' })\n        .then(child2 => Promise\n          .all([\n            findPath(),\n            findPath(child1.id),\n            findPath(child2.id),\n          ])\n          .then(([ rootPath, child1Path, child2Path ]) => Promise\n            .all([\n              rootPath.should.with.length(0),\n              child1Path.should.with.length(1),\n              child2Path.should.with.length(2)\n            ])\n            .then(() => Promise.all([\n              removeNode(root.id),\n              removeNode(child1.id),\n              removeNode(child2.id)\n            ]))\n          )\n        )\n      )\n    )\n  );\n\n  it('find parents', () => createNode({ name: 'node-root-1' })\n    .then(root => createNode({ parentId: root.id, name: 'node-child-1' })\n      .then(child1 => createNode({ parentId: root.id, name: 'node-child-1' })\n        .then(child2 => Promise\n          .all([\n            findByParentId(),\n            findByParentId(root.id),\n            findByParentId(child1.id),\n            findByParentId(child2.id),\n          ])\n          .then(([ list1, list2, list3, list4 ]) => Promise\n            .all([\n              list1.should.with.length(1),\n              list2.should.with.length(2),\n              list3.should.with.length(0),\n              list4.should.with.length(0)\n            ])\n            .then(() => Promise.all([\n              removeNode(root.id),\n              removeNode(child1.id),\n              removeNode(child2.id)\n            ]))\n          )\n        )\n      )\n    )\n  );\n\n  it('remove', () => createNode({ name: 'node-root-1' })\n    .then(root => removeNode(root.id))\n  );\n});\n\nfunction createTable(connection) {\n  return connection.schema.createTableIfNotExists(schema.tableName, function (table) {\n    table.increments();\n    table.integer('parentId').nullable();\n    table.boolean('leaf').defaultTo(schema.properties.leaf.default);\n    table.string('name');\n  });\n}\n\nfunction dropTable(connection) {\n  return connection.schema.dropTableIfExists(schema.tableName);\n}\n\nfunction removeNode(id) {\n  return micro\n    .act({\n      ...PIN_TREE_REMOVE,\n      schema,\n      criteria: { id }\n    });\n}\n\nfunction updateNode(id, params) {\n  return micro\n    .act({\n      ...PIN_TREE_UPDATE,\n      schema,\n      criteria: { id },\n      params\n    });\n}\n\nfunction createNode(params = {}) {\n  return micro\n    .act({\n      ...PIN_TREE_CREATE,\n      schema,\n      params\n    });\n}\n\nfunction findPath(id) {\n  return micro\n    .act({\n      ...PIN_TREE_FIND_PATH,\n      schema,\n      criteria: { id }\n    });\n}\n\nfunction findByParentId(parentId) {\n  return micro\n    .act({\n      ...PIN_TREE_FIND_PARENT_id,\n      schema,\n      criteria: { parentId }\n    });\n}\n\nfunction findOne(id, fields = [ 'id', 'parentId', 'leaf', 'name' ]) {\n  return micro\n    .act({\n      ...PIN_LIST_FIND_ONE,\n      schema,\n      criteria: { id },\n      options : { fields }\n    });\n}\n\nfunction findFull(id) {\n  return micro\n    .act({\n      ...PIN_LIST_FIND_ONE,\n      schema,\n      criteria: { id },\n      options : { fields: [ 'id', 'parentId', 'leaf', 'name' ] }\n    });\n}"]}