{"version":3,"sources":["../../../../src/modules/tree/utils/set-parent-leaf-true.js"],"names":["setParentLeafTrue","app","schema","parentId","resolve","act","criteria","then","count","params","leaf","id"],"mappings":";;;;;;;;;;;;;;kBAEwBA,iB;;AAFxB;;;;AAEe,SAASA,iBAAT,CAA4BC,GAA5B,EAAiCC,MAAjC,EAAyCC,QAAzC,EAAmD;AAChE,MAAI,CAACA,QAAL,EAAe;AACb,WAAO,kBAAQC,OAAR,EAAP;AACD;;AAED,SAAOH,IAAII,GAAJ,qDAA8BH,MAA9B,EAAsCI,UAAU,EAAEH,QAAF,EAAhD,KACJI,IADI,CACC,UAAe;AAAA,QAAZC,KAAY,QAAZA,KAAY;;AACnB,UAAMC,SAAS,EAAEC,MAAM,IAAR,EAAf;AACA,UAAMJ,WAAW,EAAEK,IAAIR,QAAN,EAAgBO,MAAM,KAAtB,EAAjB;AACA,WAAOF,UAAU,CAAV,GACHP,IAAII,GAAJ,qDAA8BH,MAA9B,EAAsCI,QAAtC,EAAgDG,MAAhD,IADG,GAEH,kBAAQL,OAAR,EAFJ;AAGD,GAPI,CAAP;AAQD","file":"set-parent-leaf-true.js","sourcesContent":["import { PIN_LIST_COUNTS, PIN_LIST_UPDATE } from '../../../pins';\n\nexport default function setParentLeafTrue (app, schema, parentId) {\n  if (!parentId) {\n    return Promise.resolve();\n  }\n\n  return app.act({ ...PIN_LIST_COUNTS, schema, criteria: { parentId } })\n    .then(({ count }) => {\n      const params = { leaf: true };\n      const criteria = { id: parentId, leaf: false };\n      return count === 0\n        ? app.act({ ...PIN_LIST_UPDATE, schema, criteria, params })\n        : Promise.resolve();\n    });\n}"]}