{"version":3,"sources":["../../../../src/modules/tree/utils/set-parent-leaf-true.js"],"names":["setParentLeafTrue","app","schema","parentId","Promise","resolve","act","criteria","then","count","params","leaf","id"],"mappings":";;;;;;;;kBAEwBA,iB;;AAFxB;;AAEe,SAASA,iBAAT,CAA4BC,GAA5B,EAAiCC,MAAjC,EAAyCC,QAAzC,EAAmD;AAChE,MAAI,CAACA,QAAL,EAAe;AACb,WAAOC,QAAQC,OAAR,EAAP;AACD;;AAED,SAAOJ,IAAIK,GAAJ,4CAA8BJ,MAA9B,EAAsCK,UAAU,EAAEJ,QAAF,EAAhD,KACJK,IADI,CACC,UAAe;AAAA,QAAZC,KAAY,QAAZA,KAAY;;AACnB,UAAMC,SAAS,EAAEC,MAAM,IAAR,EAAf;AACA,UAAMJ,WAAW,EAAEK,IAAIT,QAAN,EAAgBQ,MAAM,KAAtB,EAAjB;AACA,WAAOF,UAAU,CAAV,GACHR,IAAIK,GAAJ,4CAA8BJ,MAA9B,EAAsCK,QAAtC,EAAgDG,MAAhD,IADG,GAEHN,QAAQC,OAAR,EAFJ;AAGD,GAPI,CAAP;AAQD","file":"set-parent-leaf-true.js","sourcesContent":["import { PIN_LIST_COUNTS, PIN_LIST_UPDATE } from './../../constants';\n\nexport default function setParentLeafTrue (app, schema, parentId) {\n  if (!parentId) {\n    return Promise.resolve();\n  }\n\n  return app.act({ ...PIN_LIST_COUNTS, schema, criteria: { parentId } })\n    .then(({ count }) => {\n      const params = { leaf: true };\n      const criteria = { id: parentId, leaf: false };\n      return count === 0\n        ? app.act({ ...PIN_LIST_UPDATE, schema, criteria, params })\n        : Promise.resolve();\n    });\n}"]}